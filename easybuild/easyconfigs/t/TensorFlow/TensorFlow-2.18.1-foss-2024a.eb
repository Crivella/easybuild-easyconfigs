easyblock = 'PythonBundle'

name = 'TensorFlow'
version = '2.18.1'

homepage = 'https://www.tensorflow.org/'
description = "An open-source software library for Machine Intelligence"

toolchain = {'name': 'foss', 'version': '2024a'}
toolchainopts = {'pic': True}

builddependencies = [
    ('hatchling', '1.24.2'),
    ('Bazel', '6.5.0', '-Java-11'),
    # git 2.x required, see also https://github.com/tensorflow/tensorflow/issues/29053
    ('git', '2.45.1'),
    ('pybind11', '2.12.0'),
    ('UnZip', '6.0'),
    # Required to build some of the extensions
    ('poetry', '1.8.3'),
    ('Cython', '3.0.10'),
]

dependencies = [
    ('Python', '3.12.3'),
    ('h5py', '3.12.1'),
    ('cURL', '8.7.1'),
    ('dill', '0.3.9'),
    ('double-conversion', '3.3.0'),
    ('flatbuffers', '24.3.25'),
    ('flatbuffers-python', '24.3.25'),
    ('giflib', '5.2.1'),
    ('hwloc', '2.10.0'),
    ('ICU', '75.1'),
    ('JsonCpp', '1.9.5'),
    ('libjpeg-turbo', '3.0.1'),
    ('ml_dtypes', '0.5.0'),
    ('NASM', '2.16.03'),
    ('nsync', '1.29.2'),
    ('SQLite', '3.45.3'),
    ('patchelf', '0.18.0'),
    ('libpng', '1.6.43'),
    ('snappy', '1.2.1'),
    ('zlib', '1.3.1'),
    ('grpcio', '1.70.0'),
    ('wrapt', '1.16.0'),
    ('Markdown', '3.7'),
    ('absl-py', '2.1.0'),
    ('tensorboard', '2.18.0'),
    ('optree', '0.14.1'),
    ('typing-extensions', '4.11.0'),
]

exts_list = [
    ('astor', '0.8.1', {
        'checksums': ['6a6effda93f4e1ce9f618779b2dd1d9d84f1e32812c23a29b3fff6fd7f63fa5e'],
    }),
    ('termcolor', '2.5.0', {
        'checksums': ['998d8d27da6d48442e8e1f016119076b690d962507531df4890fcd2db2ef8a6f'],
    }),
    ('Werkzeug', '3.1.3', {
        'source_tmpl': '%(namelower)s-%(version)s.tar.gz',
        'checksums': ['60723ce945c19328679790e3282cc758aa4a6040e4bb330f53d30fa546d44746'],
    }),
    ('namex', '0.0.8', {
        'checksums': ['32a50f6c565c0bb10aa76298c959507abdc0e850efe085dc38f3440fcb3aa90b'],
    }),
    ('keras', '3.9.2', {
        'checksums': ['322aab6418ee3de1e2bd0871b60a07f0e444e744a7e8cba79af8b42408879ecf'],
    }),
    ('google-pasta', '0.2.0', {
        'modulename': 'pasta',
        'checksums': ['c9f2c8dfc8f96d0d5808299920721be30c9eec37f2389f28904f454565c8a16e'],
    }),
    ('astunparse', '1.6.3', {
        'checksums': ['5ad93a8456f0d084c3456d059fd9a92cce667963232cbf763eac3bc5b7940872'],
    }),
    ('tblib', '3.0.0', {
        'checksums': ['93622790a0a29e04f0346458face1e144dc4d32f493714c6c3dff82a4adb77e6'],
    }),
    (name, version, {
        'patches': [
            'TensorFlow-2.13.0_add-missing-system-protobuf-targets.patch',
            'TensorFlow-2.15.1_fix-flatbuffer-license.patch',
            'TensorFlow-2.15.1_fix-pybind11-build.patch',
            'TensorFlow-2.15.1_add-default-shell-env.patch',
            'TensorFlow-2.4.0_dont-use-var-lock.patch',
            'TensorFlow-2.18.1_disable-tf32-in-fused-matmul-tests.patch',
            'TensorFlow-2.18.1_fix-patchelf.patch',
            'TensorFlow-2.18.1_fix-xnnpack.patch',
            'TensorFlow-2.18.1_fixedpoint.patch',
            'TensorFlow-2.18.1_fix-setup.py.patch',
            'TensorFlow-2.18.1_fix-AVX512-eigen-compilation-gcc13.patch',
        ],
        'source_tmpl': 'v%(version)s.tar.gz',
        'source_urls': ['https://github.com/tensorflow/tensorflow/archive/'],
        'test_script': 'TensorFlow-2.x_mnist-test.py',
        'test_tag_filters_cpu': '-gpu,-tpu,-no_cuda_on_cpu_tap,-no_pip,-no_oss,-oss_serial,-benchmark-test,-v1only',
        'test_tag_filters_gpu': (
            'gpu,-no_gpu,-nogpu,-gpu_cupti,-no_cuda11,'
            '-no_pip,-no_oss,-oss_serial,-benchmark-test,-v1only'
        ),
        'test_targets': [
            '//tensorflow/core/...',
            '-//tensorflow/core:example_java_proto',
            '-//tensorflow/core/example:example_protos_closure',
            '//tensorflow/cc/...',
            '//tensorflow/c/...',
            '//tensorflow/python/...',
            '-//tensorflow/c/eager:c_api_test_gpu',
            '-//tensorflow/c/eager:c_api_distributed_test',
            '-//tensorflow/c/eager:c_api_distributed_test_gpu',
            '-//tensorflow/c/eager:c_api_cluster_test_gpu',
            '-//tensorflow/c/eager:c_api_remote_function_test_gpu',
            '-//tensorflow/c/eager:c_api_remote_test_gpu',
            '-//tensorflow/core/common_runtime:collective_param_resolver_local_test',
            '-//tensorflow/core/kernels/mkl:mkl_fused_ops_test',
            '-//tensorflow/core/kernels/mkl:mkl_fused_batch_norm_op_test',
            '-//tensorflow/core/ir/importexport/tests/roundtrip/...',
        ],
        'testopts': "--test_env=HOME=/tmp --test_timeout=3600 --test_size_filters=small ",
        'testopts_gpu': (
            '--test_env=HOME=/tmp --test_timeout=3600 --test_size_filters=small '
            '--run_under=//tensorflow/tools/ci_build/gpu_build:parallel_gpu_execute '
        ),
        'with_xla': True,
        'checksums': [
            {'v2.18.1.tar.gz': '467c512b631e72ad5c9d5c16b23669bcf89675de630cfbb58f9dde746d34afa8'},
            {'TensorFlow-2.13.0_add-missing-system-protobuf-targets.patch':
             '77d8c8a5627493fc7c38b4de79d49e60ff6628b05ff969f4cd3ff9857176c459'},
            {'TensorFlow-2.15.1_fix-flatbuffer-license.patch':
             '2c04d5095977a628a238dbf93c5fada7159c86752a7183e64e0cf7c7ab00caf4'},
            {'TensorFlow-2.15.1_fix-pybind11-build.patch':
             '3bb350ac92ab99c63c951c96b3b0160699f5f16822b64f72111ebfd2275cafce'},
            {'TensorFlow-2.15.1_add-default-shell-env.patch':
             '3d5196b4bf2e91048dc8a18f9e8f487a223fcd973d6302e80b0d4000ea3d652b'},
            {'TensorFlow-2.4.0_dont-use-var-lock.patch':
             'b14f2493fd2edf79abd1c4f2dde6c98a3e7d5cb9c25ab9386df874d5f072d6b5'},
            {'TensorFlow-2.18.1_disable-tf32-in-fused-matmul-tests.patch':
             '97ec29666f3449f2249b121d3c88a374d888732c978c8f2aa74aa5243c7088cc'},
            {'TensorFlow-2.18.1_fix-patchelf.patch':
             '6c9a4d8484868b68aad99527420f22ff09528db588cdb11926ec9340f0c4a816'},
            {'TensorFlow-2.18.1_fix-xnnpack.patch': 'baf81d7b2b61b5a923cf1f171d5e2400df6b8bd9073d3afa7a356e3bbe11984c'},
            {'TensorFlow-2.18.1_fixedpoint.patch': '5ea1eb3b32e7df5f9ae711a71778b4cae544b3380f18882186eea035873fb640'},
            {'TensorFlow-2.18.1_fix-setup.py.patch':
             '6a30d61fd47b773d5e3a40ba3d02288df16321ffc45500f91b666437d8ec3343'},
            {'TensorFlow-2.18.1_fix-AVX512-eigen-compilation-gcc13.patch':
             '976d4be56144060f2ac4351db8341c6dd72376b0d871d5fddd986548ad03c873'},
        ],
    }),
]

moduleclass = 'lib'

# E03: OK
    # -> with 16 cpu + 36gb ram + run tf-2.18.1-2024a.eb --parallel 10 it works on shinx
    # -> on shinx it stucks on 'installing extension tensorflow' forever -> unset OMP_PROC_BIND before run -> NO
    # -> more cpus 16 -> ok it fails with 'gcc: fatal error: Killed signal terminated program cc1plus' - need more memory
    # <- log02.txt
    
# E02: OK
        # -> from 2.16.1 estimator is not needed by TF:
            # The tf.estimator API is removed.
            # To continue using tf.estimator, you will need to use TF 2.15 or an earlier version.
            # https://github.com/tensorflow/tensorflow/releases/tag/v2.16.1 > Breaking Changes > tf.estimator
        # /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a]
        #         [output and state saved to /tmp/vsc47063/eb-uyw3gpy7/run-shell-cmd-output/python-jh369ild]
        #   >> command completed: exit 0, ran in 00h00m01s
        #   >> running shell command:
        #         /apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin/python -c "import tensorflow_estimator"
        #         [started at: 2025-05-08 20:19:35]
        #         [working dir:
        # /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a]
        #         [output and state saved to /tmp/vsc47063/eb-uyw3gpy7/run-shell-cmd-output/python-ihrjrbly]
        #   >> command completed: exit 1, ran in 00h00m35s
        #   >> running shell command:
        #         /apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin/python -m pip check
        #         [started at: 2025-05-08 20:20:17]
        #         [working dir:
        # /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a]
        #         [output and state saved to /tmp/vsc47063/eb-uyw3gpy7/run-shell-cmd-output/python-zo7mtlg_]
        #   >> command completed: exit 0, ran in 00h00m05s
        #   >> running shell command:
        #         python -c "import tensorflow"
        #         [started at: 2025-05-08 20:20:24]
        #         [working dir:
        # /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a]
        #         [output and state saved to /tmp/vsc47063/eb-uyw3gpy7/run-shell-cmd-output/python-hr0qol2n]
        #   >> command completed: exit 0, ran in 00h00m39s
        #   >> file 'bin/tensorboard' found: OK
        #   >> (non-empty) directory 'lib/python3.12/site-packages' found: OK
        #   >> running command '/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin/python -c 'import tensorflow''
        # ...
        #   >> result for command '/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin/python -c 'import
        # tensorflow'': OK
        #   >> running command '/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin/python -c 'from
        # tensorflow.python.util import tf_should_use'' ...
        #   >> result for command '/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin/python -c 'from
        # tensorflow.python.util import tf_should_use'': OK
        #   >> running shell command:
        #         python /tmp/vsc47063/easybuild/build/TensorFlow/2.18.1/foss-2024a/TensorFlow-2.x_mnist-test.py
        #         [started at: 2025-05-08 20:21:20]
        #         [working dir:
        # /kyukon/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a]
        #         [output and state saved to /tmp/vsc47063/eb-uyw3gpy7/run-shell-cmd-output/python-77vv7tch]
        #   >> command completed: exit 0, ran in 00h00m34s
        # == ... (took 3 mins 48 secs)
        # == FAILED: Installation ended unsuccessfully: Sanity check failed: extensions sanity check failed for 1 extensions:
        # tensorflow-estimator
        # failing sanity check for 'tensorflow-estimator' extension: command
        # "/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin/python -c "import tensorflow_estimator"" failed;
        # output:
        # 2025-05-08 20:19:37.901742: I tensorflow/core/util/port.cc:153] oneDNN custom operations are on. You may see slightly different
        # numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the
        # environment variable `TF_ENABLE_ONEDNN_OPTS=0`.
        # Traceback (most recent call last):
        #   File "<string>", line 1, in <module>
        #   File
        # "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-p
        # ackages/tensorflow_estimator/__init__.py", line 8, in <module>
        #     from tensorflow_estimator._api.v1 import estimator
        #   File
        # "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-p
        # ackages/tensorflow_estimator/_api/v1/estimator/__init__.py", line 8, in <module>
        #     from tensorflow_estimator._api.v1.estimator import experimental
        #   File
        # "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-p
        # ackages/tensorflow_estimator/_api/v1/estimator/experimental/__init__.py", line 8, in <module>
        #     from tensorflow_estimator.python.estimator.canned.dnn import dnn_logit_fn_builder # line: 45
        #     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        #   File
        # "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-p
        # ackages/tensorflow_estimator/python/estimator/canned/dnn.py", line 26, in <module>
        #     from tensorflow_estimator.python.estimator import estimator
        #   File
        # "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-p
        # ackages/tensorflow_estimator/python/estimator/estimator.py", line 34, in <module>
        #     from tensorflow.python.distribute import estimator_training as distribute_coordinator_training
        # ImportError: cannot import name 'estimator_training' from 'tensorflow.python.distribute'
        # (/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-p
        # ackages/tensorflow/python/distribute/__init__.py),  (took 3 hours 58 mins 23 secs)
        # == Results of the build can be found in the log file(s)
        # /tmp/vsc47063/eb-uyw3gpy7/easybuild-TensorFlow-2.18.1-20250508.162333.HsagW.log
        # == Summary:
        #    * [F] TensorFlow/2.18.1-foss-2024a
        # ERROR: Installation of tf-2.18.1-2024a.eb failed: 'Sanity check failed: extensions sanity check failed for 1 extensions: tensorflow-estimator\nfailing sanity check for \'tensorflow-estimator\' extension: command "/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin/python -c "import tensorflow_estimator"" failed; output:\n2025-05-08 20:19:37.901742: I tensorflow/core/util/port.cc:153] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.\nTraceback (most recent call last):\n  File "<string>", line 1, in <module>\n  File "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-packages/tensorflow_estimator/__init__.py", line 8, in <module>\n    from tensorflow_estimator._api.v1 import estimator\n  File "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-packages/tensorflow_estimator/_api/v1/estimator/__init__.py", line 8, in <module>\n    from tensorflow_estimator._api.v1.estimator import experimental\n  File "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-packages/tensorflow_estimator/_api/v1/estimator/experimental/__init__.py", line 8, in <module>\n    from tensorflow_estimator.python.estimator.canned.dnn import dnn_logit_fn_builder # line: 45\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-packages/tensorflow_estimator/python/estimator/canned/dnn.py", line 26, in <module>\n    from tensorflow_estimator.python.estimator import estimator\n  File "/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-packages/tensorflow_estimator/python/estimator/estimator.py", line 34, in <module>\n    from tensorflow.python.distribute import estimator_training as distribute_coordinator_training\nImportError: cannot import name \'estimator_training\' from \'tensorflow.python.distribute\' (/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-packages/tensorflow/python/distribute/__init__.py), '

# E01: OK
    # -> add more memory -> OK
    # <- log01.txt
# Configuration: 5767a3b8c20d53ad438abdccb3d2c16b25f76d446c10b1aa8605c0530e8ad9aa
# Execution platform: @local_execution_config_platform//:platform
        # [25,010 / 26,060] Compiling tensorflow/core/kernels/matmul_op_real.cc; 71s local ... (4 actions running)
        # [25,010 / 26,060] Compiling tensorflow/core/kernels/matmul_op_real.cc; 80s local ... (4 actions running)
        # ERROR: /tmp/vsc47063/easybuild/build/TensorFlow/2.18.1/foss-2024a/TensorFlow/tensorflow-2.18.1/tensorflow/core/kernels/BUILD:3588:18: Compiling tensorflow/core/kernels/matmul_op_real.cc failed: (Exit 1): gcc failed: error executing command (from target //tensorflow/core/kernels:matmul_op) 
        # (cd /tmp/vsc47063/easybuild/build/TensorFlow/2.18.1/foss-2024a/TensorFlow/bazel-root/56ab21d3bef95823065a587f2075c4b2/execroot/org_tensorflow && \
        # exec env - \
        #     CPATH=/apps/gent/RHEL9/cascadelake-ib/software/cURL/8.7.1-GCCcore-13.3.0/include:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/double-conversion/3.3.0-GCCcore-13.3.0/include:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/flatbuffers/24.3.25-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/giflib/5.2.1-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/hwloc/2.10.0-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/ICU/75.1-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/JsonCpp/1.9.5-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/libjpeg-turbo/3.0.1-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/libpng/1.6.43-GCCcore-13.3.0/include:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/nsync/1.29.2-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/pybind11/2.12.0-GCC-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/snappy/1.1.10-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/SQLite/3.45.3-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/zlib/1.3.1-GCCcore-13.3.0/include:/apps/gent/RHEL9/cascadelake-ib/software/OpenSSL/3/include \
        #     LD_LIBRARY_PATH=/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib64:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/protobuf/28.0-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/Abseil/20240722.0-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/snappy/1.1.10-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/libpng/1.6.43-GCCcore-13.3.0/lib:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/nsync/1.29.2-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/libjpeg-turbo/3.0.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/JsonCpp/1.9.5-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/giflib/5.2.1-GCCcore-13.3.0/lib:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/flatbuffers/24.3.25-GCCcore-13.3.0/lib:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/double-conversion/3.3.0-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/HDF5/1.14.5-gompi-2024a/lib:/apps/gent/RHEL9/cascadelake-ib/software/Szip/2.1.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/SciPy-bundle/2024.05-gfbf-2024a/lib/python3.12/site-packages/numpy/core/lib:/apps/gent/RHEL9/cascadelake-ib/software/ScaLAPACK/2.2.0-gompi-2024a-fb/lib:/apps/gent/RHEL9/cascadelake-ib/software/FFTW.MPI/3.3.10-gompi-2024a/lib:/apps/gent/RHEL9/cascadelake-ib/software/FFTW/3.3.10-GCC-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/FlexiBLAS/3.4.4-GCC-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/OpenBLAS/0.3.27-GCC-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/OpenMPI/5.0.3-GCC-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/UCC/1.3.0-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/PRRTE/3.0.5-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/PMIx/5.0.2-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/UCX/1.16.0-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/libevent/2.1.12-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/hwloc/2.10.0-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/libpciaccess/0.18.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/numactl/2.0.18-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/Boost/1.85.0-GCC-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/ICU/75.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/zstd/1.5.6-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/lz4/1.9.4-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/gettext/0.22.5-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/libiconv/1.17-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/libxml2/2.12.7-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/expat/2.6.2-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/cURL/8.7.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/Java/11.0.20/lib:/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/OpenSSL/3/lib:/apps/gent/RHEL9/cascadelake-ib/software/libffi/3.4.5-GCCcore-13.3.0/lib64:/apps/gent/RHEL9/cascadelake-ib/software/XZ/5.4.5-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/SQLite/3.45.3-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/Tcl/8.6.14-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/libreadline/8.2-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/ncurses/6.5-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/bzip2/1.0.8-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/binutils/2.42-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/zlib/1.3.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/GCCcore/13.3.0/lib64 \
        #     LIBRARY_PATH=/apps/gent/RHEL9/cascadelake-ib/software/cURL/8.7.1-GCCcore-13.3.0/lib:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/double-conversion/3.3.0-GCCcore-13.3.0/lib:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/flatbuffers/24.3.25-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/giflib/5.2.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/hwloc/2.10.0-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/ICU/75.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/JsonCpp/1.9.5-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/libjpeg-turbo/3.0.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/libpng/1.6.43-GCCcore-13.3.0/lib:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/nsync/1.29.2-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/pybind11/2.12.0-GCC-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/snappy/1.1.10-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/SQLite/3.45.3-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/zlib/1.3.1-GCCcore-13.3.0/lib:/apps/gent/RHEL9/cascadelake-ib/software/OpenSSL/3/lib \
        #     PATH=/tmp/vsc47063/eb-hw61ovl1/tmphjm2pdyg/rpath_wrappers/ld.bfd_wrapper:/tmp/vsc47063/eb-hw61ovl1/tmphjm2pdyg/rpath_wrappers/ld.gold_wrapper:/tmp/vsc47063/eb-hw61ovl1/tmphjm2pdyg/rpath_wrappers/ld_wrapper:/tmp/vsc47063/eb-hw61ovl1/tmphjm2pdyg/rpath_wrappers/gfortran_wrapper:/tmp/vsc47063/eb-hw61ovl1/tmphjm2pdyg/rpath_wrappers/gxx_wrapper:/tmp/vsc47063/eb-hw61ovl1/tmphjm2pdyg/rpath_wrappers/gcc_wrapper:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/sbin:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/bin:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/tensorboard/2.18.0-gfbf-2024a/bin:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/Markdown/3.7-GCCcore-13.3.0/bin:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/protobuf/28.0-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/libpng/1.6.43-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/patchelf/0.18.0-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/libjpeg-turbo/3.0.1-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/NASM/2.16.03-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/giflib/5.2.1-GCCcore-13.3.0/bin:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/flatbuffers/24.3.25-GCCcore-13.3.0/bin:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/dill/0.3.9-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/HDF5/1.14.5-gompi-2024a/bin:/apps/gent/RHEL9/cascadelake-ib/software/SciPy-bundle/2024.05-gfbf-2024a/bin:/apps/gent/RHEL9/cascadelake-ib/software/Python-bundle-PyPI/2024.06-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/FFTW/3.3.10-GCC-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/FlexiBLAS/3.4.4-GCC-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/OpenMPI/5.0.3-GCC-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/UCC/1.3.0-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/PRRTE/3.0.5-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/PMIx/5.0.2-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/UCX/1.16.0-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/libevent/2.1.12-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/hwloc/2.10.0-GCCcore-13.3.0/sbin:/apps/gent/RHEL9/cascadelake-ib/software/hwloc/2.10.0-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/numactl/2.0.18-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/Cython/3.0.10-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/poetry/1.8.3-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/virtualenv/20.26.2-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/UnZip/6.0-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/pybind11/2.12.0-GCC-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/ICU/75.1-GCCcore-13.3.0/sbin:/apps/gent/RHEL9/cascadelake-ib/software/ICU/75.1-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/zstd/1.5.6-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/lz4/1.9.4-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/gzip/1.13-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/git/2.45.1-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/Perl/5.38.2-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/gettext/0.22.5-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/libiconv/1.17-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/libxml2/2.12.7-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/expat/2.6.2-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/cURL/8.7.1-GCCcore-13.3.0/bin:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/Bazel/6.5.0-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/Java/11.0.20:/apps/gent/RHEL9/cascadelake-ib/software/Java/11.0.20/bin:/apps/gent/RHEL9/cascadelake-ib/software/hatchling/1.24.2-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/OpenSSL/3/bin:/apps/gent/RHEL9/cascadelake-ib/software/XZ/5.4.5-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/SQLite/3.45.3-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/Tcl/8.6.14-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/ncurses/6.5-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/bzip2/1.0.8-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/binutils/2.42-GCCcore-13.3.0/bin:/apps/gent/RHEL9/cascadelake-ib/software/GCCcore/13.3.0/bin:/user/gent/470/vsc47063/easybuild/easybuild-framework:/usr/libexec/jobcli:/usr/local/vsc/bin:/opt/VirtualGL/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/user/gent/470/vsc47063/.dotnet/tools \
        #     PWD=/proc/self/cwd \
        #     PYTHONNOUSERSITE=1 \
        #     PYTHONPATH=/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/typing-extensions/4.11.0-GCCcore-13.3.0/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/optree/0.14.1-GCCcore-13.3.0/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/tensorboard/2.18.0-gfbf-2024a/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/absl-py/2.1.0-GCCcore-13.3.0/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/Markdown/3.7-GCCcore-13.3.0/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/wrapt/1.16.0-gfbf-2024a/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/grpcio/1.70.0-GCCcore-13.3.0/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/protobuf-python/5.28.0-GCCcore-13.3.0/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/ml_dtypes/0.5.0-gfbf-2024a/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/flatbuffers-python/24.3.25-GCCcore-13.3.0/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/dill/0.3.9-GCCcore-13.3.0/lib/python3.12/site-packages:/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/h5py/3.12.1-foss-2024a/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/mpi4py/4.0.1-gompi-2024a/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/SciPy-bundle/2024.05-gfbf-2024a/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/Python-bundle-PyPI/2024.06-GCCcore-13.3.0/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/Cython/3.0.10-GCCcore-13.3.0/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/poetry/1.8.3-GCCcore-13.3.0/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/virtualenv/20.26.2-GCCcore-13.3.0/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/cryptography/42.0.8-GCCcore-13.3.0/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/cffi/1.16.0-GCCcore-13.3.0/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/pybind11/2.12.0-GCC-13.3.0/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/hatchling/1.24.2-GCCcore-13.3.0/lib/python3.12/site-packages:/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/easybuild/python \
        #     PYTHON_BIN_PATH=/apps/gent/RHEL9/cascadelake-ib/software/Python/3.12.3-GCCcore-13.3.0/bin/python \
        #     PYTHON_LIB_PATH=/scratch/gent/vo/001/gvo00117/easybuild/RHEL9/cascadelake-ampere-ib/software/TensorFlow/2.18.1-foss-2024a/lib/python3.12/site-packages \
        #     TF2_BEHAVIOR=1 \
        #     TF_SYSTEM_LIBS=absl_py,astor_archive,astunparse_archive,boringssl,curl,cython,dill_archive,double_conversion,flatbuffers,functools32_archive,gast_archive,gif,hwloc,icu,jsoncpp_git,libjpeg_turbo,nasm,nsync,org_sqlite,pasta,png,pybind11,six_archive,snappy,tblib_archive,termcolor_archive,typing_extensions_archive,wrapt,zlib \
        # /tmp/vsc47063/eb-hw61ovl1/tmphjm2pdyg/rpath_wrappers/gcc_wrapper/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections '-std=c++14' -MD -MF bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/matmul_op/matmul_op_real.d '-frandom-seed=bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/matmul_op/matmul_op_real.o' '-DEIGEN_MAX_ALIGN_BYTES=64' -DEIGEN_ALLOW_UNALIGNED_SCALARS '-DEIGEN_USE_AVX512_GEMM_KERNELS=0' -DTF_USE_SNAPPY '-DLLVM_ON_UNIX=1' '-DHAVE_BACKTRACE=1' '-DBACKTRACE_HEADER=<execinfo.h>' '-DLTDL_SHLIB_EXT=".so"' '-DLLVM_PLUGIN_EXT=".so"' '-DLLVM_ENABLE_THREADS=1' '-DHAVE_DEREGISTER_FRAME=1' '-DHAVE_LIBPTHREAD=1' '-DHAVE_PTHREAD_GETNAME_NP=1' '-DHAVE_PTHREAD_H=1' '-DHAVE_PTHREAD_SETNAME_NP=1' '-DHAVE_REGISTER_FRAME=1' '-DHAVE_SETENV_R=1' '-DHAVE_STRERROR_R=1' '-DHAVE_SYSEXITS_H=1' '-DHAVE_UNISTD_H=1' -D_GNU_SOURCE '-DHAVE_MALLINFO=1' '-DHAVE_SBRK=1' '-DHAVE_STRUCT_STAT_ST_MTIM_TV_NSEC=1' -DHAVE_BUILTIN_THREAD_POINTER '-DLLVM_NATIVE_ARCH="X86"' '-DLLVM_NATIVE_ASMPARSER=LLVMInitializeX86AsmParser' '-DLLVM_NATIVE_ASMPRINTER=LLVMInitializeX86AsmPrinter' '-DLLVM_NATIVE_DISASSEMBLER=LLVMInitializeX86Disassembler' '-DLLVM_NATIVE_TARGET=LLVMInitializeX86Target' '-DLLVM_NATIVE_TARGETINFO=LLVMInitializeX86TargetInfo' '-DLLVM_NATIVE_TARGETMC=LLVMInitializeX86TargetMC' '-DLLVM_NATIVE_TARGETMCA=LLVMInitializeX86TargetMCA' '-DLLVM_HOST_TRIPLE="x86_64-unknown-linux-gnu"' '-DLLVM_DEFAULT_TARGET_TRIPLE="x86_64-unknown-linux-gnu"' '-DLLVM_VERSION_MAJOR=20' '-DLLVM_VERSION_MINOR=0' '-DLLVM_VERSION_PATCH=0' '-DLLVM_VERSION_STRING="20.0.0git"' -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS '-DLLVM_HAS_AArch64_TARGET=1' '-DLLVM_HAS_AMDGPU_TARGET=1' '-DLLVM_HAS_ARM_TARGET=1' '-DLLVM_HAS_NVPTX_TARGET=1' '-DLLVM_HAS_PowerPC_TARGET=1' '-DLLVM_HAS_RISCV_TARGET=1' '-DLLVM_HAS_SystemZ_TARGET=1' '-DLLVM_HAS_X86_TARGET=1' '-DBLAKE3_USE_NEON=0' -DBLAKE3_NO_AVX2 -DBLAKE3_NO_AVX512 -DBLAKE3_NO_SSE2 -DBLAKE3_NO_SSE41 '-DNO_LLVM_SUPPORT=0' -DTENSORFLOW_USE_CUSTOM_CONTRACTION_KERNEL -DTENSORFLOW_USE_MKLDNN_CONTRACTION_KERNEL '-DBAZEL_CURRENT_REPOSITORY=""' -iquote . -iquote bazel-out/k8-opt/bin -iquote external/com_google_absl -iquote bazel-out/k8-opt/bin/external/com_google_absl -iquote external/nsync -iquote bazel-out/k8-opt/bin/external/nsync -iquote external/com_google_protobuf -iquote bazel-out/k8-opt/bin/external/com_google_protobuf -iquote external/local_tsl -iquote bazel-out/k8-opt/bin/external/local_tsl -iquote external/local_xla -iquote bazel-out/k8-opt/bin/external/local_xla -iquote external/com_googlesource_code_re2 -iquote bazel-out/k8-opt/bin/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/k8-opt/bin/external/farmhash_archive -iquote external/fft2d -iquote bazel-out/k8-opt/bin/external/fft2d -iquote external/highwayhash -iquote bazel-out/k8-opt/bin/external/highwayhash -iquote external/zlib -iquote bazel-out/k8-opt/bin/external/zlib -iquote external/eigen_archive -iquote bazel-out/k8-opt/bin/external/eigen_archive -iquote external/ml_dtypes -iquote bazel-out/k8-opt/bin/external/ml_dtypes -iquote external/snappy -iquote bazel-out/k8-opt/bin/external/snappy -iquote external/double_conversion -iquote bazel-out/k8-opt/bin/external/double_conversion -iquote external/llvm-project -iquote bazel-out/k8-opt/bin/external/llvm-project -iquote external/curl -iquote bazel-out/k8-opt/bin/external/curl -iquote external/boringssl -iquote bazel-out/k8-opt/bin/external/boringssl -iquote external/jsoncpp_git -iquote bazel-out/k8-opt/bin/external/jsoncpp_git -iquote external/onednn -iquote bazel-out/k8-opt/bin/external/onednn -Ibazel-out/k8-opt/bin/external/ml_dtypes/_virtual_includes/float8 -Ibazel-out/k8-opt/bin/external/ml_dtypes/_virtual_includes/intn -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/AsmParserTokenKinds -Ibazel-out/k8-opt/bin/external/llvm-project/mlir/_virtual_includes/ArithCanonicalizationIncGen -isystem external/com_google_protobuf/src -isystem bazel-out/k8-opt/bin/external/com_google_protobuf/src -isystem external/farmhash_archive/src -isystem bazel-out/k8-opt/bin/external/farmhash_archive/src -isystem external/eigen_archive -isystem bazel-out/k8-opt/bin/external/eigen_archive -isystem external/eigen_archive/mkl_include -isystem bazel-out/k8-opt/bin/external/eigen_archive/mkl_include -isystem external/ml_dtypes -isystem bazel-out/k8-opt/bin/external/ml_dtypes -isystem external/ml_dtypes/ml_dtypes -isystem bazel-out/k8-opt/bin/external/ml_dtypes/ml_dtypes -isystem external/llvm-project/mlir/include -isystem bazel-out/k8-opt/bin/external/llvm-project/mlir/include -isystem external/llvm-project/llvm/include -isystem bazel-out/k8-opt/bin/external/llvm-project/llvm/include -isystem external/onednn/include -isystem bazel-out/k8-opt/bin/external/onednn/include -isystem external/onednn/src -isystem bazel-out/k8-opt/bin/external/onednn/src -isystem external/onednn/src/common -isystem bazel-out/k8-opt/bin/external/onednn/src/common -isystem external/onednn/src/common/ittnotify -isystem bazel-out/k8-opt/bin/external/onednn/src/common/ittnotify -isystem external/onednn/src/cpu -isystem bazel-out/k8-opt/bin/external/onednn/src/cpu -isystem external/onednn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/onednn/src/cpu/gemm -isystem external/onednn/src/cpu/x64/xbyak -isystem bazel-out/k8-opt/bin/external/onednn/src/cpu/x64/xbyak -isystem external/onednn/src/graph -isystem bazel-out/k8-opt/bin/external/onednn/src/graph -Wno-all -Wno-extra -Wno-deprecated -Wno-deprecated-declarations -Wno-ignored-attributes -Wno-array-bounds -Wunused-result '-Werror=unused-result' -Wswitch '-Werror=switch' '-Wno-error=unused-but-set-variable' -DAUTOLOAD_DYNAMIC_KERNELS -O2 -ftree-vectorize '-march=native' -fno-math-errno -fPIC -fPIC '-std=c++17' -DEIGEN_AVOID_STL_ARRAY -Iexternal/gemmlowp -Wno-sign-compare '-ftemplate-depth=900' -fno-exceptions '-DTENSORFLOW_USE_XLA=1' -DINTEL_MKL -DENABLE_ONEDNN_V3 -DAMD_ZENDNN '-DTF_LLVM_X86_AVAILABLE=1' -msse3 -pthread '-DTENSORFLOW_USE_XLA=1' '-DINTEL_MKL=1' -fno-canonical-system-headers -Wno-builtin-macro-redefined '-D__DATE__="redacted"' '-D__TIMESTAMP__="redacted"' '-D__TIME__="redacted"' -c tensorflow/core/kernels/matmul_op_real.cc -o bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/matmul_op/matmul_op_real.o)
        # # Configuration: 5767a3b8c20d53ad438abdccb3d2c16b25f76d446c10b1aa8605c0530e8ad9aa
        # # Execution platform: @local_execution_config_platform//:platform
        # gcc: fatal error: Killed signal terminated program cc1plus
        # compilation terminated.
        # [25,014 / 26,060] 1 / 844 tests, 1 failed; checking cached actions
        # INFO: Elapsed time: 8480.057s, Critical Path: 165.52s
        # INFO: 11862 processes: 5577 internal, 6285 local.
        # FAILED: Build did NOT complete successfully
    # dmesg:
        # [2116884.771971] Tasks state (memory values in pages):
        # [2116884.772248] [  pid  ]   uid  tgid total_vm      rss pgtables_bytes swapents oom_score_adj name
        # [2116884.772540] [2309496]     0 2309496     1396      432    53248        0             0 sleep
        # [2116884.772840] [2309490]     0 2309490    53150     1728    86016        0         -1000 slurmstepd
        # [2116884.773145] [2309505] 2547063 2309505     4689     1512    69632        0             0 bash
        # [2116884.773453] [2768011] 2547063 2768011    70159    49558   466944        0             0 python3
        # [2116884.773763] [2769340] 2547063 2769340  6067083  1030558 10047488        0             0 java
        # [2116884.774071] [3057796] 2547063 3057796    76526     1008   118784        0             0 bazel
        # [2116884.774381] [3231292] 2547063 3231292     1029      504    49152        0             0 process-wrapper
        # [2116884.774686] [3231293] 2547063 3231293     3695     1008    57344        0             0 bash
        # [2116884.774983] [3231309] 2547063 3231309     1376      576    45056        0             0 gcc
        # [2116884.775282] [3231310] 2547063 3231310  1131889  1105765  9027584        0             0 cc1plus
        # [2116884.775579] [3231779] 2547063 3231779     1028      504    49152        0             0 process-wrapper
        # [2116884.775876] [3231780] 2547063 3231780     3670      864    57344        0             0 bash
        # [2116884.776172] [3231796] 2547063 3231796     1342      576    45056        0             0 gcc
        # [2116884.776465] [3231797] 2547063 3231797   480546   460637  3821568        0             0 cc1plus
        # [2116884.776752] [3231830] 2547063 3231830     1031      432    49152        0             0 process-wrapper
        # [2116884.777036] [3231831] 2547063 3231831     3746     1080    53248        0             0 bash
        # [2116884.777316] [3231847] 2547063 3231847     1378      576    45056        0             0 gcc
        # [2116884.777585] [3231848] 2547063 3231848   436622   402793  3411968        0             0 cc1plus
        # [2116884.777857] [3231861] 2547063 3231861     1031      504    49152        0             0 process-wrapper
        # [2116884.778136] [3231862] 2547063 3231862     3746     1080    57344        0             0 bash
        # [2116884.778422] [3231878] 2547063 3231878     1378      648    49152        0             0 gcc
        # [2116884.778707] [3231879] 2547063 3231879   320413   285881  2469888        0             0 cc1plus
        # [2116884.778995] [2309499]     0 2309499    70081     4392   106496        0         -1000 slurmstepd
        # [2116884.779295] oom-kill:constraint=CONSTRAINT_MEMCG,nodemask=(null),cpuset=task_0,mems_allowed=0-3,oom_memcg=/system.slice/slurmstepd.scope/job_20170862,task_memcg=/system.slice/slurmstepd.scope/job_20170862/step_0/user/task_0,task=cc1plus,pid=3231310,uid=2547063
        # [2116884.780296] Memory cgroup out of memory: Killed process 3231310 (cc1plus) total-vm:4527556kB, anon-rss:4420756kB, file-rss:2304kB, shmem-rss:0kB, UID:2547063 pgtables:8816kB oom_score_adj:0