# This file is an EasyBuild reciPY as per https://easybuilders.github.io/easybuild/
# Author: Tanmoy Chakraborty (University of Warwick)
# Email: tanmoy.chakraborty@warwick.ac.uk

easyblock = 'PythonBundle'

name = 'netket'
version = '3.14.3'  

homepage = 'https://github.com/netket/netket'
description = "NetKet is a Python machine learning library for many-body quantum systems."

toolchain = {'name': 'foss', 'version': '2023b'}  

builddependencies = [
   ('maturin', '1.3.1'),
   ('hatchling', '1.18.0'),
   ('poetry', '1.6.1'),
   ('CMake', '3.27.6'),
]

dependencies = [
    ('Python', '3.11.5'),  
    ('SciPy-bundle', '2023.11'), 
    ('jax', '0.4.25'),
    ('Optax', '0.2.2'),
    ('Flax', '0.8.4'),
    ('numba', '0.60.0'),
]

exts_list = [
    ('plum-dispatch', '2.5.2', {
        'modulename': 'plum',
        'checksums': ['1abfccc5a9c751f20dcdb1020c645968dfbc1c33ad3a9a47780834ec332cfe9e'],
    }),
    ('beartype', '0.19.0', {
        'checksums': ['de42dfc1ba5c3710fde6c3002e3bd2cad236ed4d2aabe876345ab0b4234a6573'],
    }),
    ('rich', '13.9.3', {
        'checksums': ['bc1e01b899537598cf02579d2b9f4a415104d3fc439313a7a2c165d76557a08e'],
    }),
    ('igraph', '0.11.6', {
        'checksums': ['837f233256c3319f2a35a6a80d94eafe47b43791ef4c6f9e9871061341ac8e28'],
    }),
    ('texttable', '1.7.0', {
        'checksums': ['2d2068fb55115807d3ac77a4ca68fa48803e84ebb0ee2340f858107a36522638'],
    }),
    ('equinox', '0.11.8', {
        'checksums': ['d1e91a05e41bb9538db72a8e15d26daf958348c26714533434c88c5ec0c0b0ef'],
    }),
    ('jaxtyping', '0.2.34', {
        'checksums': ['eed9a3458ec8726c84ea5457ebde53c964f65d2c22c0ec40d0555ae3fed5bbaf'],
    }),
    ('typeguard', '4.3.0', {
        'checksums': ['92ee6a0aec9135181eae6067ebd617fd9de8d75d714fb548728a4933b1dea651'],
    }),
    ('orjson', '3.9.14', {
        'checksums': ['06fb40f8e49088ecaa02f1162581d39e2cf3fd9dbbfe411eb2284147c99bad79'],
    }),
    ('tqdm', '4.66.5', {
        'checksums': ['e1020aef2e5096702d8a025ac7d16b1577279c9d63f8375b63083e9a5f0fcbad'],
    }),
    (name, version, {
        'checksums': ['0a46d320e12cd849c33508b3d3c086b1711a27ef146c5b5184d335e287cc87f4'],
    }),
]

use_pip = True
pip_install_opts = '--no-deps'

sanity_check_paths = {
    'files': ['lib/python%(pyshortver)s/site-packages/netket/__init__.py'],
    'dirs': ['lib/python%(pyshortver)s/site-packages/netket'],
}

sanity_check_commands = [
    'python -c "import netket"',
]

moduleclass = 'tools'
