name = 'MetalWalls'
version = '21.06.1'

homepage = 'https://gitlab.com/ampere2/metalwalls'
description = """MetalWalls (MW) is a molecular dynamics code dedicated to the modelling of electrochemical systems.
Its main originality is the inclusion of a series of methods allowing to apply a constant potential within the
electrode materials."""

toolchain = {'name': 'foss', 'version': '2023b'}
toolchainopts = {'usempi': True}

sources = [
    {
        "filename": "metalwalls-%(version)s.tar.xz",
        "git_config": {
            "url": "https://gitlab.com/ampere2",
            "repo_name": "metalwalls",
            "tag": '%(version)s',

        },
    },
]
checksums = [
    '41d5b0d2b9516101511b68898a79c4628338d4097f14ec68bd5309669bf007e9',
]

builddependencies = [
    ("Python", "3.11.5"),
    ("SciPy-bundle", "2023.11"),
]
dependencies = [
    ("PLUMED", "2.9.2"),
    ("f90wrap", "0.2.13"),
    ("mpi4py", "3.1.5")
]

files_to_copy = [
    (['mw'], 'bin'),
]

runtest = 'test'
pretestopts = 'export OMPI_MCA_rmaps_base_oversubscribe=true && '  # Test-suite requires minimum number of cores

moduleclass = 'chem'
