easyblock = 'PythonPackage'

name = 'MONAI'
version = '1.4.0'
versionsuffix = '-minimal'

homepage = 'https://monai.io/'
description = """
MONAI is a PyTorch-based, open-source framework for deep learning in healthcare
imaging, part of PyTorch Ecosystem.
"""

toolchain = {'name': 'foss', 'version': '2023b'}

github_account = 'Project-MONAI'
source_urls = [GITHUB_SOURCE]
sources = [{'download_filename': '%(version)s.tar.gz', 'filename': SOURCE_TAR_GZ}]
checksums = ['3ed592c7a760f5c3084021da5585cd1ba5e52a969b85a62e1f15495cb71ae26e']

builddependencies = [
    ('Ninja', '1.11.1'),
]

dependencies = [
    ('Python', '3.11.5'),
    ('SciPy-bundle', '2023.11'),
    ('PyTorch', '2.1.2'),
]

use_pip = True
download_dep_fail = True

preinstallopts = 'BUILD_MONAI=1'

sanity_pip_check = True

sanity_check_commands = ["python -c 'import monai; monai.config.print_config()'"]

moduleclass = 'vis'
