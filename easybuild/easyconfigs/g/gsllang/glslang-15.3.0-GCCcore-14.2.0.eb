easyblock = 'CMakeMake'

name = 'glslang'
version = '15.3.0'

homepage = 'https://www.khronos.org/opengles/sdk/tools/Reference-Compiler/'
description = """Glslang is the official reference compiler front end for the OpenGL ES and OpenGL shading languages.
It implements a strict interpretation of the specifications for these languages. It is open and free for anyone to use,
either from a command line or programmatically. The OpenGL and OpenGL ES working groups are committed to maintaining
consistency between the reference compiler and the corresponding shading language specifications."""

toolchain = {'name': 'GCCcore', 'version': '14.2.0'}
toolchainopts = {'pic': True}

sources = [{
    'filename': SOURCE_TAR_XZ,
    'git_config': {
        'url': 'https://github.com/KhronosGroup',
        'repo_name': '%(name)s',
        'tag': version,
    },
}]
checksums = ['629cddb4dc63e03b13d4acb15917adb5261eb13d0901b1e87bebf31eb93af38c']

builddependencies = [
    ('CMake', '3.31.3'),
    ('binutils', '2.42'),
    ('Bison', '3.8.2')
]

dependencies = [
    # ('Python', '3.13.1'), # Only needed with SPIRV
    # ('SPIRV-Headers', '1.6.2'),
    # ('SPIRV-Tools', '2024.2'),
]

configopts = ' '.join([
    '-DENABLE_OPT=OFF',  # Needed if SPIRV is not used
])

sanity_check_paths = {
    'files': [],
    'dirs': ['bin'],
}

moduleclass = 'compiler'
