easyblock = 'CMakeMake'

name = 'ginkgo'
version = '1.9.0'

homepage = 'https://github.com/ginkgo-project/ginkgo'
description = "Ginkgo is a high-performance numerical linear algebra library with a focus on the solution of sparse linear systems"

toolchain = {'name': 'foss', 'version': '2023b'}
toolchainopts = {'openmp': True, 'usempi': True}

source_urls = ['https://github.com/ginkgo-project/ginkgo/archive/refs/tags/v%(version)s']
sources = ['v%(version)s.tar.gz']

moduleclass = 'numlib'

configopts = '-DGINKGO_BUILD_MPI=on -DGINKGO_BUILD_OMP=on'

shared_libs=1

builddependencies = [
    ('CMake', '3.27.6')
]

sanity_check_paths = {
    'files': ["examples/simple-solver/simple-solver"],
    'dirs': [],
}
