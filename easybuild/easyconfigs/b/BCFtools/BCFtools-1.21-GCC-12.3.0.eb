easyblock = 'ConfigureMake'

name = 'BCFtools'
version = '1.21'

homepage = 'https://github.com/samtools/bcftools/'
description = """BCFtools is a program for variant calling and manipulating files in the Variant Call Format (VCF)
and its binary counterpart BCF. All commands work transparently with both VCFs and BCFs,
both uncompressed and BGZF-compressed."""

toolchain = {'name': 'GCC', 'version': '12.3.0'}

source_urls = ['https://github.com/samtools/bcftools/releases/download/%(version)s/']
sources = ['%(namelower)s-%(version)s.tar.bz2']
checksums = ['528a4cc1d3555368db75a700b22a3c95da893fd1827f6d304716dfd45ea4e282']

builddependencies = [
    ('Autotools', '20220317'),
]
dependencies = [
    ('HTSlib', '1.18'),
    ('GSL', '2.7'),
    ('Perl', '5.36.1'),
]

preconfigopts = 'autoheader && autoconf && '
configopts = '--enable-libgsl --enable-perl-filters '

runtest = 'test'

sanity_check_paths = {
    'files': ['bin/bcftools'],
    'dirs': ['libexec', 'share'],
}

modextravars = {'BCFTOOLS_PLUGINS': '%(installdir)s/libexec/%(namelower)s'}

moduleclass = 'bio'
