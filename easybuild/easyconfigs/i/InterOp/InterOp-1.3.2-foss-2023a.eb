easyblock = 'CMakeMake'

name = 'InterOp'
version = '1.3.2'

homepage = 'https://illumina.github.io/interop/index.html'
description = """The Illumina InterOp libraries are a set of common routines used for reading
InterOp metric files produced by Illumina sequencers including NextSeq 1k/2k and NovaSeqX.
These libraries are backwards compatible and capable of supporting prior releases of the software,
 with one exception: GA systems have been excluded."""

toolchain = {'name': 'foss', 'version': '2023a'}

source_urls = ['https://github.com/Illumina/interop/archive/']
sources = ['v%(version)s.tar.gz']
checksums = ['4989480b3d074ac36499f122a1de109840b6edab238cc6482f6025d1021d4564']

builddependencies = [
    ('CMake', '3.26.3'),
]

local_bins = [
    'dumpbin',
    'dumptext',
    'index-summary',
    'plot_by_cycle',
    'plot_by_lane',
    'plot_flowcell',
    'plot_qscore_heatmap',
    'plot_qscore_histogram',
    'summary',
]

sanity_check_paths = {
    'files': ['bin/%s' % binary for binary in local_bins] + ['lib64/libinterop%s_lib.a' % s for s in ['', '_fpic']],
    'dirs': ['include/%(namelower)s'],
}

sanity_check_commands = ['%s --help' % binary for binary in local_bins]

moduleclass = 'bio'
